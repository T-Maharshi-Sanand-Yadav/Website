<div id="all-posts-collapsible">
  <h1>All Posts by Label</h1>
</div>

<script>
  const blogURL = "https://www.tmsytutorials.com";
  const labels = [
    "Cadence Genus", "DEF", "genus", "gvim", "Innovus",
    "interview preparation", "Liberty Files", "Pin Placement",
    "STA", "standard cell characterization", "Tempus", "verilog hdl"
  ];

  const container = document.getElementById("all-posts-collapsible");

  labels.forEach(label => {
    const id = label.replace(/\s+/g, '-').toLowerCase();
    const section = document.createElement("div");
    section.innerHTML = `
      <button onclick="togglePosts('${id}')" class="collapsible-btn">${label}</button>
      <div id="${id}" class="collapsible-content">
        <p>Loading...</p>
      </div>
    `;
    container.appendChild(section);

    const callbackName = `render_${id}`;
    window[callbackName] = function(json) {
      const entries = json.feed.entry;
      const contentDiv = document.getElementById(id);
      if (!entries) {
        contentDiv.innerHTML = "<p>No posts found.</p>";
        return;
      }
      const ul = document.createElement("ul");
      entries.forEach(entry => {
        const title = entry.title.$t;
        const link = entry.link.find(l => l.rel === "alternate").href;
        const li = document.createElement("li");
        li.innerHTML = `<a href="${link}" target="_blank">${title}</a>`;
        ul.appendChild(li);
      });
      contentDiv.innerHTML = "";
      contentDiv.appendChild(ul);
    };

    const script = document.createElement("script");
    script.src = `${blogURL}/feeds/posts/summary/-/${encodeURIComponent(label)}?alt=json-in-script&max-results=100&callback=${callbackName}`;
    document.body.appendChild(script);
  });

  function togglePosts(id) {
    const div = document.getElementById(id);
    div.style.display = div.style.display === "none" ? "block" : "none";
  }
</script>

<style>
  .collapsible-btn {
    background-color: #2a5d84;
    color: white;
    padding: 10px 16px;
    border: none;
    text-align: left;
    width: 100%;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
    border-radius: 4px;
  }

  .collapsible-content {
    padding: 10px 20px;
    display: none;
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    border-top: none;
  }

  ul {
    list-style-type: disc;
    padding-left: 20px;
  }

  li {
    margin: 5px 0;
  }

  a {
    text-decoration: none;
    color: #2a5d84;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
